<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width,initial-scale=1"/>
<title>WONEUVWONE — Digital Art (1 BTC each)</title>
<meta name="description" content="WONEUVWONE — one-of-one digital art by URIESCA. Each piece = 1 BTC. Pay with PayPal (USD equivalent) or manual BTC."/>
<style>
  body{margin:0;font-family:Inter, Arial, Helvetica, sans-serif;background:#000;color:#fff}
  .wrap{max-width:1100px;margin:18px auto;padding:20px}
  header{text-align:center}
  header h1{font-size:36px;line-height:1}
  header h2{color:#9ee7e1;margin-top:6px}
  .notice{background:rgba(255,255,255,0.03);padding:12px;border-radius:8px;margin:12px 0;color:#cfd8dc}
  .grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(260px,1fr));gap:18px;margin-top:18px}
  .card{background:#0b0b0f;padding:14px;border-radius:10px;text-align:center;border:1px solid rgba(255,255,255,0.03)}
  .card img{width:100%;height:200px;object-fit:cover;border-radius:8px;background:#111}
  .price{color:#9ee7e1;font-weight:700;margin:8px 0}
  .btn{background:#fff;color:#000;padding:10px 14px;border-radius:8px;border:none;cursor:pointer;font-weight:700}
  .cart{position:fixed;right:18px;top:18px;width:300px;background:#101018;padding:12px;border-radius:10px;border:1px solid rgba(255,255,255,0.04)}
  .cart h4{margin:0 0 8px}
  .cart ul{list-style:none;padding:0;margin:0;max-height:260px;overflow:auto}
  .cart li{padding:6px 0;border-bottom:1px dashed rgba(255,255,255,0.03);display:flex;justify-content:space-between}
  .totals{margin-top:10px;font-weight:700;color:#9ee7e1}
  .modal{display:none;position:fixed;left:50%;top:50%;transform:translate(-50%,-50%);background:#0b0b11;padding:18px;border-radius:10px;border:1px solid rgba(255,255,255,0.04);z-index:999}
  .qr{width:200px;height:200px;border-radius:8px;margin:10px auto;display:block}
  .field{padding:10px;border-radius:8px;border:1px solid rgba(255,255,255,0.04);width:100%;box-sizing:border-box;margin:8px 0;background:transparent;color:#fff;text-align:center}
  footer{margin:30px 0 60px;text-align:center;color:#9aa0a6}
  @media(max-width:800px){ .cart{position:static;width:auto;margin:10px} }
</style>
<!-- PayPal SDK - replace client-id with your live PayPal Business client id -->
</head>
<body>
<div class="wrap">
  <header>
    <h1>WONE</h1>
    <h2>UV WONE</h2>
    <div class="notice">
      <strong>Each WONEUVWONE piece = 1 BTC.</strong> This page charges the USD equivalent (real-time) using PayPal Smart Buttons so buyers can pay with card or PayPal — checkout stays on the site. After payment you (the seller) verify the transaction and deliver the unique code to the buyer.
    </div>
  </header>

  <!-- assets grid - add/replace images, titles as you wish -->
  <section class="grid" id="assetsGrid"></section>

  <section style="margin-top:18px" id="howItWorks">
    <h3>How to buy</h3>
    <ol style="color:#cfd8dc">
      <li>Add items to cart (each = 1 BTC).</li>
      <li>Click <em>Checkout</em> in the cart to get the exact USD amount and PayPal window.</li>
      <li>Complete PayPal payment — stay on the site while paying.</li>
      <li>After payment, copy the PayPal transaction ID and paste it into the <strong>Submit Payment Info</strong> box on this page (we store it so you can contact buyer & deliver the unique code).</li>
    </ol>
  </section>

  <!-- Submit Payment Info -->
  <section style="margin-top:18px;background:rgba(255,255,255,0.02);padding:12px;border-radius:10px">
    <h3>Submit Payment Info (after you pay)</h3>
    <input id="buyerContact" class="field" placeholder="Email or phone (for code delivery)">
    <input id="buyerTxid" class="field" placeholder="PayPal transaction ID (txid) - paste here">
    <div style="display:flex;gap:8px;justify-content:center">
      <button class="btn" onclick="submitPaymentInfo()">Submit info</button>
      <button class="btn" onclick="openCheckout()">Checkout — Pay with PayPal</button>
    </div>
    <div id="submitMsg" style="margin-top:8px;color:#9ee7e1"></div>
  </section>

  <footer>
    <div>Contact for help: YOUR_EMAIL_OR_CONTACT_HERE</div>
    <div style="margin-top:6px;color:#9aa0a6">Tip: test with a small purchase first or use PayPal Sandbox if you prefer a test run.</div>
  </footer>
</div>

<!-- side cart -->
<div class="cart" id="sideCart">
  <h4>Your Cart</h4>
  <ul id="cartList"></ul>
  <div class="totals">Total: <span id="totalBTC">0</span> BTC • <span id="totalUSD">$0</span></div>
  <div style="margin-top:8px">
    <div style="margin-bottom:8px"><strong>Pay in USD via PayPal</strong></div>
    <div id="paypal-button-container"></div>
  </div>
  <div style="margin-top:10px;color:#9aa0a6;font-size:13px">Seller will verify transaction in PayPal dashboard and deliver the unique code to the buyer.</div>

  <div style="margin-top:10px;color:#9aa0a6;font-size:13px">
    Recent submissions (admin): <div id="recentSubmissions" style="margin-top:8px;font-size:12px;color:#cfd8dc;max-height:160px;overflow:auto"></div>
  </div>
</div>

<!-- checkout modal (QR display fallback) -->
<div class="modal" id="checkoutModal">
  <h3 id="checkoutTitle"></h3>
  <div id="checkoutAmount" style="font-weight:700;color:#9ee7e1"></div>
  <img class="qr" id="checkoutQR" src="" alt="QR">
  <div style="text-align:center"><code id="checkoutAddress" style="color:#fff"></code></div>
  <div style="text-align:center;margin-top:10px"><button class="btn" onclick="closeCheckout()">Close</button></div>
</div>

<script>
/* =========================
   CONFIG - set these values
   ========================= */
const BASE_USD_IF_BTC_DOWN = 11450;   // fallback USD if price lookup fails
const ASSET_COUNT = 11;               // how many cards to generate
/* ========================= */

// app state
let btcUSD = null;
let assets = [];
let cart = [];

// fetch BTC price (CoinGecko)
async function fetchBtcPrice(){
  try{
    const res = await fetch('https://api.coingecko.com/api/v3/simple/price?ids=bitcoin&vs_currencies=usd');
    const j = await res.json();
    btcUSD = j.bitcoin.usd;
  }catch(e){
    console.warn('CoinGecko fetch failed', e);
    btcUSD = null;
  }
}

// build dummy assets
function buildAssets(){
  for(let i=1;i<=ASSET_COUNT;i++){
    assets.push({
      id:i,
      title:`Digital Asset ${i}`,
      code:`WONE-ART-${1000+i}`, // placeholder code (you'll deliver real codes)
      img:`placeholder${i}.jpg`,
      priceBTC:1
    });
  }
}

// render cards
function renderAssets(){
  const grid = document.getElementById('assetsGrid');
  grid.innerHTML='';
  assets.forEach(a=>{
    const div = document.createElement('div');
    div.className='card';
    div.innerHTML=`
      <img src="${a.img}" alt="${a.title}">
      <h3>${a.title}</h3>
      <p class="price">1 BTC</p>
      <p style="color:#cfd8dc">One-of-one digital art by URIESCA. Unique code delivered after verification.</p>
      <div style="margin-top:12px"><button class="btn" onclick="addToCart(${a.id})">Add to cart</button></div>
    `;
    grid.appendChild(div);
  });
  renderCart();
}

// cart helpers
function addToCart(id){
  const item = assets.find(x=>x.id===id);
  cart.push(item);
  renderCart();
}
function removeFromCart(idx){
  cart.splice(idx,1); renderCart();
}
function renderCart(){
  const list = document.getElementById('cartList'); list.innerHTML='';
  cart.forEach((c,idx)=>{
    const li = document.createElement('li');
    li.innerHTML = `<span>${c.title}</span><button style="background:transparent;border:none;color:#9aa0a6;cursor:pointer" onclick="removeFromCart(${idx})">Remove</button>`;
    list.appendChild(li);
  });
  const totalBTC = cart.length * 1;
  document.getElementById('totalBTC').textContent = totalBTC.toFixed(8).replace(/\.?0+$/,'');
  const usd = btcUSD ? (totalBTC * btcUSD) : (totalBTC * BASE_USD_IF_BTC_DOWN);
  document.getElementById('totalUSD').textContent = '$' + Number(usd).toLocaleString(undefined,{maximumFractionDigits:2});
}

// PayPal buttons - uses current total USD
function renderPayPalButton(){
  const container = document.getElementById('paypal-button-container');
  container.innerHTML = ''; // reset
  paypal.Buttons({
      createOrder: function(data, actions) {
    if(cart.length === 0){ 
      alert('Cart is empty'); 
      return; 
    }

    // FIXED $1 USD for testing (real mode)
    const usdValue = 1;

    return actions.order.create({
      purchase_units:[{ amount:{ value: usdValue.toFixed(2) } }]
    });
  },

  onApprove: function(data, actions) {
    return actions.order.capture().then(function(details){
      const orders = JSON.parse(localStorage.getItem('wone_orders')||'[]');
      const newOrder = {
        id: Date.now(),
        paypalOrderId: data.orderID,
        payerName: details.payer.name && details.payer.name.given_name ? details.payer.name.given_name : 'Buyer',
        payerEmail: details.payer.email_address || '',
        items: cart.map(i=>i.title),
        amount: details.purchase_units && details.purchase_units[0] && details.purchase_units[0].amount && details.purchase_units[0].amount.value,
        time: new Date().toISOString()
      };
      orders.unshift(newOrder);
      localStorage.setItem('wone_orders', JSON.stringify(orders));
      renderRecentSubmissions();
      cart = []; renderCart();
      alert('✅ Payment complete! Thank you — save this confirmation: ' + details.id);
    });
  },

  onError: function(err){
    console.error(err);
    alert('Payment error. Try again later.');
  }
}).render('#paypal-button-container');
      if(cart.length === 0){ alert('Cart is empty'); return; }
      const totalBTC = cart.length * 1;
      const usdValue = btcUSD ? (totalBTC * btcUSD) : (totalBTC * BASE_USD_IF_BTC_DOWN);
      return actions.order.create({
        purchase_units:[{ amount:{ value: usdValue.toFixed(2) } }]
      });
    },
    onApprove: function(data, actions) {
      return actions.order.capture().then(function(details){
        // Save order to localStorage for admin/pickup
        const orders = JSON.parse(localStorage.getItem('wone_orders')||'[]');
        const newOrder = {
          id: Date.now(),
          paypalOrderId: data.orderID,
          payerName: details.payer.name && details.payer.name.given_name ? details.payer.name.given_name : 'Buyer',
          payerEmail: details.payer.email_address || '',
          items: cart.map(i=>i.title),
          amount: details.purchase_units && details.purchase_units[0] && details.purchase_units[0].amount && details.purchase_units[0].amount.value,
          time: new Date().toISOString()
        };
        orders.unshift(newOrder);
        localStorage.setItem('wone_orders', JSON.stringify(orders));
        renderRecentSubmissions();
        // Clear cart
        cart = []; renderCart();
        // show success
        alert('Payment complete. Thank you — you will receive delivery instructions. Save this confirmation: ' + details.id);
      });
    },
    onError: function(err){
      console.error(err);
      alert('Payment error. Try again later.');
    }
  }).render('#paypal-button-container');
}

/* Submit payment info (buyer pastes txid or payment ID after paying) */
function submitPaymentInfo(){
  const contact = document.getElementById('buyerContact').value.trim();
  const txid = document.getElementById('buyerTxid').value.trim();
  const msg = document.getElementById('submitMsg');
  if(!contact || !txid){ msg.style.color='#f66'; msg.textContent='Please provide contact (email/phone) and the PayPal transaction ID.'; return; }
  const subs = JSON.parse(localStorage.getItem('wone_submissions')||'[]');
  subs.unshift({id:Date.now(), contact, txid, items: JSON.stringify(cart), at: new Date().toISOString()});
  localStorage.setItem('wone_submissions', JSON.stringify(subs));
  msg.style.color='#9ee7e1'; msg.textContent='Submitted — seller will verify and deliver your code.';
  document.getElementById('buyerContact').value=''; document.getElementById('buyerTxid').value='';
  renderRecentSubmissions();
}

/* Recent submissions for admin */
function renderRecentSubmissions(){
  const box = document.getElementById('recentSubmissions');
  const subs = JSON.parse(localStorage.getItem('wone_submissions')||'[]');
  const orders = JSON.parse(localStorage.getItem('wone_orders')||'[]');
  let html = '';
  if(orders.length){
    html += '<div style="margin-bottom:8px"><strong>Paid (captured):</strong></div>';
    html += orders.slice(0,8).map(o=>`<div style="padding:6px;border-bottom:1px dashed rgba(255,255,255,0.03)"><strong>${o.payerEmail||o.payerName}</strong><div style="color:#9aa0a6;font-size:12px">${o.items.join(', ')} • $${o.amount}</div><div style="color:#9aa0a6;font-size:12px">${o.time}</div></div>`).join('');
  }
  if(subs.length){
    html += '<div style="margin-top:8px"><strong>Manual submissions:</strong></div>';
    html += subs.slice(0,8).map(s=>`<div style="padding:6px;border-bottom:1px dashed rgba(255,255,255,0.03)"><strong>${s.contact}</strong><div style="color:#9aa0a6;font-size:12px">${s.txid}</div><div style="color:#9aa0a6;font-size:12px">${s.at}</div></div>`).join('');
  }
  box.innerHTML = html || '<div style="color:#9aa0a6">No submissions yet</div>';
}

/* Checkout modal fallback - (not used for PayPal) */
function openCheckout(){ 
  // If you also want to show BTC QR fallback, implement here
  // For now we focus PayPal flow (embedded button)
  const totalBTC = cart.length * 1;
  if(totalBTC === 0){ alert('Cart empty'); return; }
  // scroll to paypal button
  document.getElementById('paypal-button-container').scrollIntoView({behavior:'smooth'});
}

/* Init */
(async function init(){
  await fetchBtcPrice();
  buildAssets();
  renderAssets();
  renderCart();
  renderRecentSubmissions();
  // render PayPal button (depends on client-id in script tag)
  renderPayPalButton();
})();
<script>
/* =========================
   CONFIG - set these values
   ========================= */
const BASE_USD_IF_BTC_DOWN = 11450;
const ASSET_COUNT = 11;

// app state
let btcUSD = null;
let assets = [];
let cart = [];

// build assets (your digital art items)
function buildAssets(){
  for(let i=1;i<=ASSET_COUNT;i++){
    assets.push({
      id:i,
      title:`Digital Asset ${i}`,
      code:`WONE-ART-${1000+i}`,
      img:`placeholder${i}.jpg`,
      priceBTC:1
    });
  }
}

// render items on the page
function renderAssets(){
  const grid = document.getElementById('assetsGrid');
  grid.innerHTML='';
  assets.forEach(a=>{
    const div = document.createElement('div');
    div.className='card';
    div.innerHTML=`
      <img src="${a.img}" alt="${a.title}">
      <h3>${a.title}</h3>
      <p class="price">1 BTC</p>
      <p style="color:#cfd8dc">One-of-one digital art by URIESCA.</p>
      <div style="margin-top:12px">
        <button class="btn" onclick="addToCart(${a.id})">Add to cart</button>
      </div>
    `;
    grid.appendChild(div);
  });
  renderCart();
}

// cart functions
function addToCart(id){
  const item = assets.find(a=>a.id===id);
  if(item) cart.push(item);
  renderCart();
}
function renderCart(){
  const c = document.getElementById('cartItems');
  if(!c) return;
  if(cart.length===0){ c.innerHTML='<p>Your cart is empty</p>'; return; }
  c.innerHTML = cart.map(a=>`<p>${a.title}</p>`).join('');
}

// ======== PayPal Button Section ========
paypal.Buttons({
  style:{layout:'vertical', color:'gold', shape:'rect', label:'pay'},
  createOrder: function(data, actions) {
    if(cart.length === 0){ 
      alert('Cart is empty'); 
      return; 
    }
    const usdValue = 1; // $1 test
    return actions.order.create({
      purchase_units:[{ amount:{ value: usdValue.toFixed(2) } }]
    });
  },
  onApprove: function(data, actions) {
    return actions.order.capture().then(function(details){
      alert('✅ Payment complete! Save this confirmation: ' + details.id);
    });
  },
  onError: function(err){
    console.error(err);
    alert('Payment error. Try again later.');
  }
}).render('#paypal-button-container');

// ======== Initialize the Page ========
(async function init(){
  buildAssets();
  renderAssets();
  renderCart();
})();
</script>
</body>  
</html>
